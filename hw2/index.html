<html>

<head>
	<title>CS184 Homework 2 Writeup</title>
</head>

<body style="margin: 30 auto; width: 80%">
	<h1>CS184 Homework 1 Writeup</h1>
	<h3>Written By: Ong Jing Xuan (3039759595)</h3>
	<p><i>Hosted on:
			<a href="https://cal-cs184-student.github.io/hw-webpages-sp24-ongjx16/hw2/index.html"
				target="_blank">https://cal-cs184-student.github.io/hw-webpages-sp24-ongjx16/hw2/index.html</a>
		</i></p>

	<h2>Task 1: Bezier Curves with 1D de Casteljau Subdivision (10 pts)</h2>
	<h3>Briefly explain de Casteljau's algorithm and how you implemented it in order to evaluate Bezier curves.</h3>
	<p>
		Given a set of control points, de Casteljau's algorithm uses linear interpolation between adjacent points and
		generates intermediate sets of control points recursively until only one point is generated, which is the point
		at which the resultant Bezier curve will pass through. The algorithm uses a predetermined float t that
		determines the extent of linear interpolation.
	</p>
	<p>
		To implement this for a specific layer of evaluation, I took the input set of points and iterated through all
		the points. For each point, I used the formula of Vector2D interpolatedPoint = points[i] + t * (points[i + 1] -
		points[i]) to get the resultant point in between the point and its adjacent point. This interpolatedPoint is
		then added to an array of points that are then returned as the result of the function.
	</p>
	<h3>Bezier Curve with 6 control points</h3>
	<div style="display: flex; justify-content: space-around; align-items: center;">
		<figure style="margin: 20px;">
			<img src="media/task1/step1.png" alt="Description of Image 1" style="width: 100%; height: auto;">
			<figcaption style="text-align: center;">Step 1</figcaption>
		</figure>
		<figure style="margin: 20px;">
			<img src="media/task1/step2.png" alt="Description of Image 2" style="width: 100%; height: auto;">
			<figcaption style="text-align: center;">Step 2</figcaption>
		</figure>
		<figure style="margin: 20px;">
			<img src="media/task1/step3.png" alt="Description of Image 3" style="width: 100%; height: auto;">
			<figcaption style="text-align: center;">Step 3</figcaption>
		</figure>
	</div>
	<div style="display: flex; justify-content: space-around; align-items: center;">

		<figure style="margin: 20px;">
			<img src="media/task1/step4.png" alt="Description of Image 3" style="width: 100%; height: auto;">
			<figcaption style="text-align: center;">Step 4</figcaption>
		</figure>
		<figure style="margin: 20px;">
			<img src="media/task1/step5.png" alt="Description of Image 1" style="width: 100%; height: auto;">
			<figcaption style="text-align: center;">Step 5</figcaption>
		</figure>
	</div>
	<div style="display: flex; justify-content: space-around; align-items: center;">

		<figure style="margin: 20px;">
			<img src="media/task1/step6.png" alt="Description of Image 2" style="width: 100%; height: auto;">
			<figcaption style="text-align: center;">Step 6</figcaption>
		</figure>
		<figure style="margin: 20px;">
			<img src="media/task1/step7.png" alt="Description of Image 3" style="width: 100%; height: auto;">
			<figcaption style="text-align: center;">Step 7</figcaption>
		</figure>

	</div>
	<h3>Modified control points and t</h3>
	<img src="./media/task1/different.png"
		style="width: 50%; height: auto; display: block; margin-left: auto; margin-right: auto;" />


	<h2>Task 2: Bezier Surfaces with Separable 1D de Casteljau</h2>
	<h3>Briefly explain how de Casteljau algorithm extends to Bezier surfaces and how you implemented it in order to
		evaluate Bezier surfaces.</h3>
	<p>
		The de Casteljau algorithm for Bezier surfaces is basically an extension of that for a curve. Given a set of nxn
		control points (2d array), we first use the 1D algorithm to calculate a resultant point for each row of control
		points, using the parameter u (equivalent to parameter t in task 1).
	</p>
	<p>
		With the group of points obtained from all rows, we then use these points to perform linear interpolation again
		(in the other direction) to get the resultant point that would appear on the Bezier surface, this time using the
		parameter v.
	</p>
	<p>
		To implement this in code, I first implemented the same thing as in task 1 for the <i>evaluateStep()</i>
		function, but working with Vector3 instead of Vector2 data structures. For <i>evaluate1D()</i>, I then called
		<i>evaluateStep()</i> recursively until only one vector3D point is returned, which would be the resultant vector
		produced for a set of control points in a row. Lastly, in <i>evaluate()</i>, I first ran through each row in
		<i>controlPoints</i> and called <i>evaluate1D()</i> for each row with parameter u, adding each vector obtained
		to an initialised array called <i>interpolatedPoints</i>. Then, I ran <i>evaluate1D()</i> with parameter v using
		<i>interpolatedPoints</i>, then returned the resultant point on the Bezier curve.

	<h3>Screenshot of bez/teapot.bez</h3>
	<img src="./media/task2/teapot.png"
		style="width: 50%; height: auto; display: block; margin-left: auto; margin-right: auto;" />


	<h2>Task 3: Area-Weighted Vertex Normals</h2>
	<h3>Implementation of area-weighted vertex normals</h3>
	<p>
		First, to iterate through all faces I used a do-while loop to iterate through all the faces using the twin structure of the halfedge, and stopping once I return back to the starting halfedge. 
	</p>
	<p>
		For every iteration of the do-while loop, I obtain the 3 vertices of the current face. Then, I calculate two edge vectors using the 3 vertices, and used the two vectors to obtain the cross product, and the area of the triangle (half the magnitude of the normal vector). Then, I multiply the unit normal vector with the area of the triangle, and add it to the sum of normals for all faces. Additionally, I also kept track of the sum of all areas of the faces.
	</p>
	<p>
		Lastly, I normalised the sum of all area-weighted normals by dividing the sum by the total area of all faces. This normalised sum is then the returned as the result of the <i>Vertex::normal()</i> function.
	</p>

	<h3>Screenshots of dae/teapot.dae</h3>
	<div style="display: flex; justify-content: space-around; align-items: center;">
		<figure style="margin: 20px;">
			<img src="media/task3/flatshading.png" alt="Description of Image 1" style="width: 100%; height: auto;">
			<figcaption style="text-align: center;">Flat Shading</figcaption>
		</figure>
		<figure style="margin: 20px;">
			<img src="media/task3/phong.png" alt="Description of Image 3" style="width: 100%; height: auto;">
			<figcaption style="text-align: center;">Phong Shading</figcaption>
		</figure>

	</div>





</body>

</html>